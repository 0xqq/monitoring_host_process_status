# 远程Linux主机及进程状态监控系统---后台监测子系统

## 目录

- [子系统结构](#子系统结构)
- [子系统简介](#子系统简介)
- [系统说明](#系统说明)
- [功能说明](#功能说明)
- [运行方法](#运行方法)

## 子系统结构

```text
.
├── data_base.py                # 数据库操作
├── email.conf                  # 预警邮箱的登录信息 
├── exception_email_user.py     # 向用户发送预警邮件 
├── monitoring_process.py       # 定时监测主机及进程，并出现异常时发送预警邮件 
└── mysql_config.py             # 数据库配置 
```


## 子系统简介
本系统实现对远程Linux主机及进程状态的监控，利用系统后台监测程序定时对其状态进行获取，且通过系统控制台添加、查看和控制
主机及进程状态。该系统开发的核心思想在于方便同时维护大量系统的人员能够查看系统运行情况，及时发现系统异常，且在系统运行
出现异常时，可进行预警。


## 子系统说明
1. 系统采用Python开发，系统控制台使用Tornado网站框架，数据库使用MySQL
2. 远程主机为Ubuntu系统，其他Linux系统未测试
3. 远程主机需要开启ssh服务，不需要安装其他软件（暂时，网络服务可能需要）
4. 只需要在运行监控系统的主机上安装Python库等


## 功能说明
1. 实时监测主机及所关注进程的状态
2. 出现异常（停止）向用户提供预警信息，发送邮件
3. 用户和主机账号信息加密
4. 提供控制功能（运行、停止）
5. 提供操作界面，最大的方便和简洁提供给用户使用


## 运行方法
1. 创建符合系统要求MySQL数据库表
2. 运行控制台（client_monitoring）程序，通过浏览器访问系统，添加监控的主机及进程
3. 运行后台监测程序（server_monitoring），长期对关注的主机进程状态监控
4. 通过控制台查看和控制进程




### 待添加功能
1. 监测主机状态时，不同用户关注相同的主机，则只监测一次，更新所有。
2. 如上，不同用户关注相同进程时，也是监测一次，而不需要每次都要监测。（重新设置数据表结构）
3. 将近30天的探测记录，转移到专门存储历史记录的表中，不是删除。
4. 对于父进程和子进程，通过文件名称kill，或者获取相同文件名称的进程号，再kill
5. 增加主机状态的监测
6. ~~增加进程异常邮件预警功能~~
7. 确认异常规则（主机和进程）
8. 潜在bug，查询pid，但是出现两条记录，需要根据pid，匹配真正的记录（严重bug！！！）
